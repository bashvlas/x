/*{"current_version":"1.2.0","build_id":177,"github_url":"https://github.com/bashvlas/x"}*/
!function(e){window.webextension_library_name=e,window[e]={}}("webextension_library"),window[window.webextension_library_name].util=function(){var e=new DOMParser,n=window[window.webextension_library_name];return{inject_scripts:function(e,t,o){return new Promise(function(r){var i=t.splice(0,1)[0],a=!!o&&!!o.all_frames,c=o?o.frame_id||0:0;chrome.tabs.executeScript(e,{file:i,runAt:"document_start",allFrames:a,frameId:c},function(){t.length>0?n.util.inject_scripts(e,t,o).then(r):r()})})},inject_styles:function(e,n,t){for(var o=!!t&&!!t.all_frames,r=t?t.frame_id||0:0,i=0;i<n.length;i++)chrome.tabs.insertCSS(e,{file:n[i],runAt:"document_start",allFrames:o,frameId:r})},inject_script_arr:function(e,n,t){n.forEach(function(n){var o=e.createElement("script");o.src=n,o.async=!1,t?e.body.appendChild(o):e.head.appendChild(o)})},inject_style_arr:function(e,n,t){n.forEach(function(n){var o=e.createElement("link");o.href=n,o.rel="stylesheet",t?e.body.appendChild(o):e.head.appendChild(o)})},open_new_tab:function(e){chrome.tabs.create({active:!0,url:e})},send_to_all_tabs:function(e){chrome.tabs.query({},function(n){n.forEach(function(n){chrome.tabs.sendMessage(n.id,e)})})},list_to_arr:function(e){return Array.prototype.slice.call(e)},text_to_json:function(e){try{return JSON.parse(e)}catch(e){return}},text_to_doc:function(n){return e.parseFromString(n,"text/html")},html_to_doc:function(n){return e.parseFromString(n,"text/html")},doc_to_val:function(e){var n=e[0],t=e[1],o=e[2],r=e[3];if("length"===o)return n.querySelectorAll(t).length;var i=n.querySelector(t);return i?"text"===o?i.innerText:"html"===o?i.innerHTML:"attr"===o?i.getAttribute(r):"value"===o?i.value:null:null},is_defined:function(e){return"undefined"!=typeof e},is_undefined:function(e){return"undefined"==typeof e},normalize_links:function(e){for(var n=e.querySelectorAll("a"),t=n.length;t--;)n[t].href=n[t].href;return e},query:function(e){if("undefined"==typeof e.method){for(var n=e[0],t=e[1],o=[],r=n.length;r--;){for(var i=!0,a=Object.keys(t),c=a.length;c--;){var s=a[c];t[s]!==n[r][s]&&(i=!1)}i&&o.push(n[r])}return o}if("remove"===e.method)for(var r=e.arr.length;r--;){for(var u=e.arr[r],d=!0,l=Object.keys(e.q||{}),f=Object.keys(e.nq||{}),c=l.length;c--;)u[l[c]]!==e.q[l[c]]&&(d=!1);for(var c=f.length;c--;)u[f[c]]===e.q[f[c]]&&(d=!1);d===!0&&e.arr.splice(r,1)}else if("find"===e.method){for(var o=[],r=e.arr.length;r--;){for(var u=e.arr[r],d=!0,l=Object.keys(e.q||{}),f=Object.keys(e.nq||{}),c=l.length;c--;)u[l[c]]!==e.q[l[c]]&&(d=!1);for(var c=f.length;c--;)u[f[c]]===e.q[f[c]]&&(d=!1);d===!0&&o.push(e.arr[r])}return o}},extend:function(e,n){return Object.keys(n).forEach(function(t){e[t]=n[t]}),e},filter:function(e){for(var n=Object.keys(e),t=n.length;t--;)e[n[t]]||delete e[n[t]];return e},wait:function(e){return new Promise(function(n){setTimeout(n,e)})},cookie_to_hash:function(e){for(var n=e.split(/;\s*/),t={},o=0;o<n.length;o++)n[o]=n[o].split("="),t[n[o][0]]=n[o][1];return t},pad:function(e){return e<10?"0"+e:""+e},trigger:function(e,n){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent(n,!1,!0),e.dispatchEvent(t,{bubbles:!0})}else e.fireEvent("on"+n)},open_window_with_post_data:function(e,n){var t=document.createElement("form"),o=document.createElement("input");t.action=e,t.method="POST",t.target="_blank",o.name="data",o.value=JSON.stringify(n),t.appendChild(o),t.style.display="none",document.body.appendChild(t),t.submit()},encode:function(e){e.split("").map(function(e){return String.fromCharCode(e.charCodeAt(0))}).join("")},download_file:function(e,n){var t=document.createElement("a");t.download=e,t.href=n,document.body.appendChild(t),t.click(),document.body.removeChild(t),delete t},load_resources:function(e){return new Promise(function(t){var o={},r=0;e.forEach(function(i){var a=i[0],c=i[1],s=i[2];0===s.indexOf("local")&&(s=chrome.extension.getURL(s.replace("local",""))),$.get(s,function(i){r+=1,"text"===c?o[a]=i:"json"===c?o[a]=n.util.text_to_json(i):o[a]=i,e.length===r&&t(o)},"text")})})}}}(),window[window.webextension_library_name].procedures=function(){var e=window[window.webextension_library_name];return{load_config:function(){return e.ajax({method:"get_json",url:chrome.extension.getURL("/config.json")})},allow_iframes:function(e){chrome.webRequest.onHeadersReceived.addListener(function(e){for(var n=0;n<e.responseHeaders.length;++n)"x-frame-options"===e.responseHeaders[n].name.toLowerCase()&&e.responseHeaders.splice(n,1);return{responseHeaders:e.responseHeaders}},{urls:e},["blocking","responseHeaders"])},clear_all_cookies:function(e){chrome.cookies.getAll({url:e},function(n){n.forEach(function(n){chrome.cookies.remove({url:e,name:n.name})})})}}}(),window[window.webextension_library_name].logs=function(){return{start_clearing_logs:function(){},save_log_item:function(){return new Promise(function(e){chrome.storage.local})}}}(),window[window.webextension_library_name].url=function(){return{}}(),window[window.webextension_library_name].hub=function(e){function n(e,n){"undefined"==typeof r[e]&&(r[e]=[]),r[e].push(n)}function t(e,n,t){"undefined"==typeof i[n]&&(i[n]=[]),i[n].push({observers_name:e,observer_fn:t})}function o(n,t,o,r){if("prod"===e);else if("dev"===e){var i="%c "+n+": "+o+" => "+t;console.groupCollapsed(i,"color: blue"),console.log(r),console.groupEnd()}}var r={},i={};return{fire:function(e,n){"undefined"!=typeof r[e]&&(n=n?n:{},n.event_name=e,r[e].forEach(function(t){o("hub","listener",e,n),t(n)})),"undefined"!=typeof i[e]&&(n=n?n:{},n.event_name=e,i[e].forEach(function(t){o("hub",t.observers_name,e,n),t.observer_fn(n)}))},add:function(e){Object.keys(e).forEach(function(t){n(t,e[t])})},add_observers:function(e,n){Object.keys(n).forEach(function(o){t(e,o,n[o])})},send_runtime_message_rq_to_rs:function(e){window.chrome.runtime.sendMessage(e)},send_tab_message_rq_to_rs:function(e){return e.all_tabs_flag?void window.chrome.tabs.query({},function(n){n.forEach(function(n){window.chrome.tabs.sendMessage(n.id,e)})}):new Promise(function(n){window.chrome.tabs.sendMessage(e.tab_id,e,n)})},add_window_observers:function(e,n,t,r){e.addEventListener("message",function(e){if(e.data&&e.data.context===n){var i=e.data.name,a=e.data.data;e.data.sender===t&&(r.all&&(o("window",n+" "+t,i,a),r.all(a,e)),r[i]&&(o("window",n+" "+t,i,a),r[i](a,e)))}})},add_runtime_observers:function(e,n){chrome.runtime.onMessage.addListener(function(t,r,i){if(t&&t.name){var a=t.name,c=t.data;n.all&&(o("runtime",e,a,c),n.all(c,r,i)),n[a]&&(o("runtime",e,a,c),n[a](c,r,i))}})},find_and_add_event_listeners:function(e){var n=this;$(e).on("click","[data-onclick]",function(e){n.fire(e.currentTarget.dataset.onclick,e)})},message_window:function(e,n,t,o,r){e.postMessage({context:n,sender:t,name:o,data:r},"*")},send_to_active_tab:function(n,t,o){if("dev"===e){var r="%c OUT: "+n;console.groupCollapsed(r,"color: brown"),console.log(t),console.groupEnd()}chrome.tabs.query({active:!0,currentWindow:!0},function(r){chrome.tabs.sendMessage(r[0].id,{name:n,data:t},function(t){if("dev"===e){var r="%c OUT RESPONSE: "+n;console.groupCollapsed(r,"color: brown"),console.log(t),console.groupEnd()}o&&o(t)})})}}},window[window.webextension_library_name].tester=function(){var e=window[window.webextension_library_name];return{test_conv:function(n,t){e.ajax({method:"get_json",url:t}).then(function(t){Object.keys(t).forEach(function(o){t[o].forEach(function(t){var r=o.split("_to_")[0],i=o.split("_to_")[1];Promise.all([e.tester.unserialize(t.input),e.tester.unserialize(t.output)]).then(function(t){var o=t[0],a=t[1],c=e.conv.get_conv_data(n,r,i,o),s=e.tester.compare(a,c.output);e.tester.log_test_case(c,o,a,s)})})})})},unserialize:function(n){return new Promise(function(t){if(null===n||"object"!=typeof n)t(n);else if("element"===n.__serial_type__)t(e.tester.html_to_element(n.html));else if("date"===n.__serial_type__)t(new Date(n.ts));else if("page_data"===n.__serial_type__)e.ajax({method:"get_text",url:"pages/"+encodeURIComponent(encodeURIComponent(n.url))}).then(function(o){t({url:n.url,text:o,doc:e.util.html_to_doc(o)})});else{var o=Object.keys(n).length,r=0;Object.keys(n).forEach(function(i){e.tester.unserialize(n[i]).then(function(e){n[i]=e,r+=1,r===o&&t(n)})}),0===Object.keys(n).length&&t(n)}})},html_to_element:function(e){var n=new DOMParser,t=n.parseFromString(e,"text/html");return t.body.firstElementChild},compare:function(n,t){if(n===t)return!0;if(n instanceof Date&&t instanceof Date)return n.getTime()===t.getTime();if(null===n&&null===t)return!0;if("object"==typeof n&&"object"==typeof t&&null!==n&&null!==t){for(var o,r=Object.keys(n),i=Object.keys(t),a=r.length;a--;)if(o=e.tester.compare(n[r[a]],t[r[a]]),o===!1)return!1;for(var a=i.length;a--;)if(o=e.tester.compare(n[i[a]],t[i[a]]),o===!1)return!1;return!0}return!1},log_test_case:function(n,t,o,r){var i=r?"color:green":"color:red";console.groupCollapsed("%c "+n.namespace+": "+n.from_name+" => "+n.to_name,i),console.log(t),console.log(o),console.log(n.output),e.conv.log_conv_data(n),console.groupEnd()}}}(),window[window.webextension_library_name].ajax=function(){function e(e){return Object.keys(e).map(function(n){return encodeURIComponent(n)+"="+encodeURIComponent(e[n])}).join("&")}function n(e){var n;return"POST"===e.method&&"application/x-www-form-urlencoded"===e.content_type?n=r.ajax.obj_to_form_data(e.body):"POST"===e.method&&"application/json"===e.content_type&&(n=JSON.stringify(e.body)),window.fetch(e.url,{method:e.method,credentials:"include",headers:new Headers({"Content-Type":e.content_type,Accept:e.accept}),body:n}).then(function(n){return n.text().then(function(t){return{head:{error:!1,code:0,http_req:e,status:n.status,headers:n.headers},body:{text:t}}})}).catch(function(n){return{head:{error:!0,code:1,http_req:e}}})}function t(e){return new Promise(function(n){function t(){}function o(){n(200===this.status?{error:!1,status:this.status,response:this.response}:{status:this.status,error:!0})}function r(){n({status:this.status,error:!0})}var i=new XMLHttpRequest;if(i.open(e.method,e.url,!0),e.timeout&&(i.timeout=e.timeout),i.responseType=e.response_type||"text",e.headers&&Object.keys(e.headers).forEach(function(n){i.setRequestHeader(n,e.headers[n])}),"json"===e.rq_body_type&&i.setRequestHeader("Content-Type","application/json"),i.addEventListener("load",o),i.addEventListener("error",r),i.addEventListener("timeout",t),"json"===e.rq_body_type)var a=JSON.stringify(e.rq_body);else if("form_data"===e.rq_body_type){var a=new FormData;Object.keys(e.rq_body).forEach(function(n){a.append(n,e.rq_body[n])})}else var a=null;i.send(a)})}function o(o){var i=new Headers(o.headers||{}),a=o.credentials||"include";return"get_json"===o.method?window.fetch(o.url,{method:"GET",credentials:"include",headers:i}).then(function(e){return e.text().then(function(e){return r.util.text_to_json(e)})}).catch(function(e){return null}):"get_doc"===o.method?window.fetch(o.url,{method:"GET",credentials:a,headers:i}).then(function(e){return e.text().then(function(e){return r.util.text_to_doc(e)})}).catch(function(e){return null}):"get_blob"===o.method?window.fetch(o.url,{method:"GET",credentials:a,headers:i}).then(function(e){return e.blob()}).catch(function(e){return null}):"get_text"===o.method?window.fetch(o.url,{method:"GET",credentials:a,headers:i}).then(function(e){return e.text()}).catch(function(e){return null}):"post_json_get_json"===o.method?(i.append("Content-Type","application/json"),window.fetch(o.url,{method:"POST",credentials:a,body:JSON.stringify(o.body),headers:i}).then(function(e){return e.text().then(function(e){return r.util.text_to_json(e)})}).catch(function(e){return null})):"post"===o.method?(i.append("Content-Type","application/x-www-form-urlencoded"),window.fetch(o.url,{method:"POST",credentials:a,body:e(o.body),headers:i}).then(function(e){return e.text().then(function(e){return r.util.text_to_json(e)})}).catch(function(e){return null})):"http"===o.method?n(o.data):"xhr"===o.method?t(o.data):void 0}var r=window[window.webextension_library_name];return o}(),window[window.webextension_library_name].query=function(){return{query:function(e){if("undefined"==typeof e.method){for(var n=e[0],t=e[1],o=[],r=n.length;r--;){for(var i=!0,a=Object.keys(t),c=a.length;c--;){var s=a[c];t[s]!==n[r][s]&&(i=!1)}i&&o.push(n[r])}return o}if("remove"===e.method)for(var r=e.arr.length;r--;){for(var u=e.arr[r],d=!0,l=Object.keys(e.q||{}),f=Object.keys(e.nq||{}),c=l.length;c--;)u[l[c]]!==e.q[l[c]]&&(d=!1);for(var c=f.length;c--;)u[f[c]]===e.q[f[c]]&&(d=!1);d===!0&&e.arr.splice(r,1)}else if("find"===e.method){for(var o=[],r=e.arr.length;r--;){for(var u=e.arr[r],d=!0,l=Object.keys(e.q||{}),f=Object.keys(e.nq||{}),c=l.length;c--;)u[l[c]]!==e.q[l[c]]&&(d=!1);for(var c=f.length;c--;)u[f[c]]===e.q[f[c]]&&(d=!1);d===!0&&o.push(e.arr[r])}return o}}}}(),window[window.webextension_library_name].storage=function(){return{get:function(e){var n,t=e.split(".");return new Promise(function(e){window.chrome.storage.local.get(null,function(o){n=o;for(var r=0;r<t.length;r++){if(void 0===typeof n[t[r]]){e(void 0);break}n=n[t[r]]}e(n)})})},set:function(e,n){var t,o=e.split(".");return new Promise(function(e){window.chrome.storage.local.get(null,function(r){t=r;for(var i=0;i<o.length;i++)if(i===o.length-1)t[o[i]]=n;else{if(void 0===typeof t[o[i]]){e(!1);break}t=t[o[i]]}window.chrome.storage.local.set(r,e.bind(this,!0))})})}}}(),window[window.webextension_library_name].detect=function(){function e(e){var t=e.root||e.root_element||document,o=e.target_element||document,r=e.callback,i=e.method||"normal",a=e.selector||"*",c=n;if(n+=1,"normal"===i){t=t||document;for(var s=t.querySelectorAll(a),u=0;u<s.length;u++)"1"!==s[u].dataset["detected_"+c]&&(s[u].dataset["detected_"+c]="1",r(s[u]));var d=new MutationObserver(function(e){var n=t.querySelectorAll(a);if(n)for(var o=0;o<n.length;o++)"1"!==n[o].dataset["detected_"+c]&&(n[o].dataset["detected_"+c]="1",r(n[o]))});d.observe(t,{childList:!0,subtree:!0})}else{if("once"===i)return new Promise(function(e){var n=t.querySelector(a);if(n)e(n);else{var o=new MutationObserver(function(){var n=t.querySelector(a);n&&(e(n),o.disconnect(t))});o.observe(t,{childList:!0,subtree:!0})}});if("wait_for"===i)return new Promise(function(e){var n=!1,o=$(a,t).get(0);if(o)e(o);else{var r=new MutationObserver(function(){n===!1&&(o=$(a,t).get(0),o&&(e(o),r.disconnect(t),n=!0))});r.observe(t,{childList:!0,subtree:!0})}});if("detect_attribute_change"===i){var d=new MutationObserver(function(e){r(o,e)});d.observe(o,{attributes:!0})}else if("detect_changes"===i){var d=new MutationObserver(function(e){r(o,e)});d.observe(o,{attributes:!0,childList:!0,subtree:!0})}else if("detect_new_element"===i){var d=new MutationObserver(function(e){r(o,e)});d.observe(o,{attributes:!0,childList:!0,subtree:!0})}}}var n=0;return e}(),window[window.webextension_library_name].bg_api=function(){if("undefined"!=typeof chrome.extension){var e={};return chrome.runtime.onMessage.addListener(function(n,t,o){if("bg_api"===n._target&&e[n.api_name]&&e[n.api_name][n.method_name]){var r=e[n.api_name][n.method_name](n.input,t);if(r instanceof Promise)return r.then(o),!0;o(r)}}),{register:function(n,t){e[n]=t},exec:function(e,n,t){return new Promise(function(o){chrome.runtime.sendMessage({_target:"bg_api",api_name:e,method_name:n,input:t},o)})}}}}(),window[window.webextension_library_name].conv=function(){function e(c,s,u,d){if("dev"===o.mode){var l=i(c,s,u,d);return o.silence&&o.silence.indexOf(s+"_to_"+u)===-1&&(n.conv.log_conv_data(l),r.push(l)),l.output}if("prod"===o.mode)return a(c,s,u,d);var f=t[c][s+"_to_"+u];return f(d,e)}var n=window[window.webextension_library_name],t={},o={mode:"prod",silence:[]},r=[],i=function(){var e=function(n,o,r,i){function a(n,t,o,r){var i=e(n,t,o,r);return u.conv_data_arr.push(i),i.output}var c=t[n],s=o+"_to_"+r,u={namespace:n,from_name:o,to_name:r,conv_data_arr:[],found:!0,input:i,output:void 0};if(c[s])try{u.output=c[s](i,a),u.output instanceof Promise&&(u.output=new Promise(function(e){u.output.then(function(n){e(n)}).catch(function(e){u.error=!0,u.stack=e.stack})}))}catch(e){u.error=!0,u.stack=e.stack}else u.found=!1;return u};return e}(),a=function(){var e=function(n,o,r,i){var a=t[n];if(a&&a[o+"_to_"+r])try{var c=a[o+"_to_"+r](i,e);return c instanceof Promise?new Promise(function(e,n){c.then(function(n){e(n)}).catch(function(n){e(void 0)})}):c}catch(e){return}};return e}();return e.register=function(e,n){t[e]=n},e.set_options=function(e){o=e},e.log_conv_data=function(e){var t="%c "+e.namespace+": "+e.from_name+" => "+e.to_name;e.error?(console.groupCollapsed(t,"color: red"),console.log(e.input),console.log(e.stack)):e.found?(console.groupCollapsed(t,"color: green"),console.log(e.input),console.log(e.output)):(console.groupCollapsed(t,"color: #F0AD4E"),console.log(e.input)),e.conv_data_arr.forEach(function(e){n.conv.log_conv_data(e)}),console.groupEnd()},e.get_conv_data=i,e.flush=function(){r.forEach(e.log_conv_data)},e}();