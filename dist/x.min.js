/*{"current_version":"1.2.0","build_id":153,"github_url":"https://github.com/bashvlas/x"}*/
!function(e){window.webextension_library_name=e,window[e]={}}("webextension_library"),window[window.webextension_library_name].util=function(){var e=new DOMParser,t=window[window.webextension_library_name];return{inject_scripts:function(e,n,r){return new Promise(function(o){var i=n.splice(0,1)[0],a=!!r&&!!r.all_frames,c=r?r.frame_id||0:0;chrome.tabs.executeScript(e,{file:i,runAt:"document_start",allFrames:a,frameId:c},function(){n.length>0?t.util.inject_scripts(e,n,r).then(o):o()})})},inject_styles:function(e,t,n){for(var r=!!n&&!!n.all_frames,o=n?n.frame_id||0:0,i=0;i<t.length;i++)chrome.tabs.insertCSS(e,{file:t[i],runAt:"document_start",allFrames:r,frameId:o})},inject_script_arr:function(e,t,n){t.forEach(function(t){var r=e.createElement("script");r.src=t,r.async=!1,n?e.body.appendChild(r):e.head.appendChild(r)})},inject_style_arr:function(e,t,n){t.forEach(function(t){var r=e.createElement("link");r.href=t,r.rel="stylesheet",n?e.body.appendChild(r):e.head.appendChild(r)})},open_new_tab:function(e){chrome.tabs.create({active:!0,url:e})},send_to_all_tabs:function(e){chrome.tabs.query({},function(t){t.forEach(function(t){chrome.tabs.sendMessage(t.id,e)})})},list_to_arr:function(e){return Array.prototype.slice.call(e)},text_to_json:function(e){try{return JSON.parse(e)}catch(e){return}},text_to_doc:function(t){return e.parseFromString(t,"text/html")},html_to_doc:function(t){return e.parseFromString(t,"text/html")},doc_to_val:function(e){var t=e[0],n=e[1],r=e[2],o=e[3];if("length"===r)return t.querySelectorAll(n).length;var i=t.querySelector(n);return i?"text"===r?i.innerText:"html"===r?i.innerHTML:"attr"===r?i.getAttribute(o):"value"===r?i.value:null:null},is_defined:function(e){return"undefined"!=typeof e},is_undefined:function(e){return"undefined"==typeof e},normalize_links:function(e){for(var t=e.querySelectorAll("a"),n=t.length;n--;)t[n].href=t[n].href;return e},query:function(e){if("undefined"==typeof e.method){for(var t=e[0],n=e[1],r=[],o=t.length;o--;){for(var i=!0,a=Object.keys(n),c=a.length;c--;){var u=a[c];n[u]!==t[o][u]&&(i=!1)}i&&r.push(t[o])}return r}if("remove"===e.method)for(var o=e.arr.length;o--;){for(var s=e.arr[o],d=!0,l=Object.keys(e.q||{}),f=Object.keys(e.nq||{}),c=l.length;c--;)s[l[c]]!==e.q[l[c]]&&(d=!1);for(var c=f.length;c--;)s[f[c]]===e.q[f[c]]&&(d=!1);d===!0&&e.arr.splice(o,1)}else if("find"===e.method){for(var r=[],o=e.arr.length;o--;){for(var s=e.arr[o],d=!0,l=Object.keys(e.q||{}),f=Object.keys(e.nq||{}),c=l.length;c--;)s[l[c]]!==e.q[l[c]]&&(d=!1);for(var c=f.length;c--;)s[f[c]]===e.q[f[c]]&&(d=!1);d===!0&&r.push(e.arr[o])}return r}},extend:function(e,t){return Object.keys(t).forEach(function(n){e[n]=t[n]}),e},filter:function(e){for(var t=Object.keys(e),n=t.length;n--;)e[t[n]]||delete e[t[n]];return e},wait:function(e){return new Promise(function(t){setTimeout(t,e)})},cookie_to_hash:function(e){for(var t=e.split(/;\s*/),n={},r=0;r<t.length;r++)t[r]=t[r].split("="),n[t[r][0]]=t[r][1];return n},pad:function(e){return e<10?"0"+e:""+e},trigger:function(e,t){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n,{bubbles:!0})}else e.fireEvent("on"+t)},open_window_with_post_data:function(e,t){var n=document.createElement("form"),r=document.createElement("input");n.action=e,n.method="POST",n.target="_blank",r.name="data",r.value=JSON.stringify(t),n.appendChild(r),n.style.display="none",document.body.appendChild(n),n.submit()},encode:function(e){e.split("").map(function(e){return String.fromCharCode(e.charCodeAt(0))}).join("")},download_file:function(e,t){var n=document.createElement("a");n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),delete n},load_resources:function(e){return new Promise(function(n){var r={},o=0;e.forEach(function(i){var a=i[0],c=i[1],u=i[2];$.get(u,function(i){o+=1,"text"===c?r[a]=i:"json"===c?r[a]=t.util.text_to_json(i):r[a]=i,e.length===o&&n(r)},"text")})})}}}(),window[window.webextension_library_name].procedures=function(){var e=window[window.webextension_library_name];return{load_config:function(){return e.ajax({method:"get_json",url:chrome.extension.getURL("/config.json")})},allow_iframes:function(e){chrome.webRequest.onHeadersReceived.addListener(function(e){for(var t=0;t<e.responseHeaders.length;++t)"x-frame-options"===e.responseHeaders[t].name.toLowerCase()&&e.responseHeaders.splice(t,1);return{responseHeaders:e.responseHeaders}},{urls:e},["blocking","responseHeaders"])},clear_all_cookies:function(e){chrome.cookies.getAll({url:e},function(t){t.forEach(function(t){chrome.cookies.remove({url:e,name:t.name})})})}}}(),window[window.webextension_library_name].logs=function(){return{start_clearing_logs:function(){},save_log_item:function(){return new Promise(function(e){chrome.storage.local})}}}(),window[window.webextension_library_name].url=function(){return{}}(),window[window.webextension_library_name].hub=function(){function e(e,n){"undefined"==typeof t[e]&&(t[e]=[]),t[e].push(n)}var t={};return{fire:function(e,n){"undefined"!=typeof t[e]&&(n=n?n:{},n.event_name=e,t[e].forEach(function(e){e(n)}))},add:function(t){Object.keys(t).forEach(function(n){e(n,t[n])})},send_runtime_message_rq_to_rs:function(e){window.chrome.runtime.sendMessage(e)},send_tab_message_rq_to_rs:function(e){return e.all_tabs_flag?void window.chrome.tabs.query({},function(t){t.forEach(function(t){window.chrome.tabs.sendMessage(t.id,e)})}):new Promise(function(t){window.chrome.tabs.sendMessage(e.tab_id,e,t)})},add_window_observers:function(e,t,n,r){e.addEventListener("message",function(e){if(e.data&&e.data.context===t){var o=e.data.name,i=e.data.data;e.data.sender===n&&(r.all&&r.all(i,e),r[o]&&r[o](i,e))}})},find_and_add_event_listeners:function(e){var t=this;$(e).on("click","[data-onclick]",function(e){t.fire(e.currentTarget.dataset.onclick,e)})},message_window:function(e,t,n,r,o){e.postMessage({context:t,sender:n,name:r,data:o},"*")}}},window[window.webextension_library_name].tester=function(){var e=window[window.webextension_library_name];return{test_conv:function(t,n){e.ajax({method:"get_json",url:n}).then(function(n){Object.keys(n).forEach(function(r){n[r].forEach(function(n){var o=r.split("_to_")[0],i=r.split("_to_")[1];Promise.all([e.tester.unserialize(n.input),e.tester.unserialize(n.output)]).then(function(n){var r=n[0],a=n[1],c=e.conv.get_conv_data(t,o,i,r),u=e.tester.compare(a,c.output);e.tester.log_test_case(c,r,a,u)})})})})},unserialize:function(t){return new Promise(function(n){if(null===t||"object"!=typeof t)n(t);else if("element"===t.__serial_type__)n(e.tester.html_to_element(t.html));else if("date"===t.__serial_type__)n(new Date(t.ts));else if("page_data"===t.__serial_type__)e.ajax({method:"get_text",url:"pages/"+encodeURIComponent(encodeURIComponent(t.url))}).then(function(r){n({url:t.url,text:r,doc:e.util.html_to_doc(r)})});else{var r=Object.keys(t).length,o=0;Object.keys(t).forEach(function(i){e.tester.unserialize(t[i]).then(function(e){t[i]=e,o+=1,o===r&&n(t)})}),0===Object.keys(t).length&&n(t)}})},html_to_element:function(e){var t=new DOMParser,n=t.parseFromString(e,"text/html");return n.body.firstElementChild},compare:function(t,n){if(t===n)return!0;if(t instanceof Date&&n instanceof Date)return t.getTime()===n.getTime();if(null===t&&null===n)return!0;if("object"==typeof t&&"object"==typeof n&&null!==t&&null!==n){for(var r,o=Object.keys(t),i=Object.keys(n),a=o.length;a--;)if(r=e.tester.compare(t[o[a]],n[o[a]]),r===!1)return!1;for(var a=i.length;a--;)if(r=e.tester.compare(t[i[a]],n[i[a]]),r===!1)return!1;return!0}return!1},log_test_case:function(t,n,r,o){var i=o?"color:green":"color:red";console.groupCollapsed("%c "+t.namespace+": "+t.from_name+" => "+t.to_name,i),console.log(n),console.log(r),console.log(t.output),e.conv.log_conv_data(t),console.groupEnd()}}}(),window[window.webextension_library_name].ajax=function(){function e(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}function t(e){var t;return"POST"===e.method&&"application/x-www-form-urlencoded"===e.content_type?t=o.ajax.obj_to_form_data(e.body):"POST"===e.method&&"application/json"===e.content_type&&(t=JSON.stringify(e.body)),window.fetch(e.url,{method:e.method,credentials:"include",headers:new Headers({"Content-Type":e.content_type,Accept:e.accept}),body:t}).then(function(t){return t.text().then(function(n){return{head:{error:!1,code:0,http_req:e,status:t.status,headers:t.headers},body:{text:n}}})}).catch(function(t){return{head:{error:!0,code:1,http_req:e}}})}function n(e){return new Promise(function(t){function n(){}function r(){t(200===this.status?{error:!1,status:this.status,response:this.response}:{status:this.status,error:!0})}function o(){t({status:this.status,error:!0})}var i=new XMLHttpRequest;if(i.open(e.method,e.url,!0),e.timeout&&(i.timeout=e.timeout),i.responseType=e.response_type||"text",e.headers&&Object.keys(e.headers).forEach(function(t){i.setRequestHeader(t,e.headers[t])}),"json"===e.rq_body_type&&i.setRequestHeader("Content-Type","application/json"),i.addEventListener("load",r),i.addEventListener("error",o),i.addEventListener("timeout",n),"json"===e.rq_body_type)var a=JSON.stringify(e.rq_body);else if("form_data"===e.rq_body_type){var a=new FormData;Object.keys(e.rq_body).forEach(function(t){a.append(t,e.rq_body[t])})}else var a=null;i.send(a)})}function r(r){var i=new Headers(r.headers||{}),a=r.credentials||"include";return"get_json"===r.method?window.fetch(r.url,{method:"GET",credentials:"include",headers:i}).then(function(e){return e.text().then(function(e){return o.util.text_to_json(e)})}).catch(function(e){return null}):"get_doc"===r.method?window.fetch(r.url,{method:"GET",credentials:a,headers:i}).then(function(e){return e.text().then(function(e){return o.util.text_to_doc(e)})}).catch(function(e){return null}):"get_blob"===r.method?window.fetch(r.url,{method:"GET",credentials:a,headers:i}).then(function(e){return e.blob()}).catch(function(e){return null}):"get_text"===r.method?window.fetch(r.url,{method:"GET",credentials:a,headers:i}).then(function(e){return e.text()}).catch(function(e){return null}):"post_json_get_json"===r.method?(i.append("Content-Type","application/json"),window.fetch(r.url,{method:"POST",credentials:a,body:JSON.stringify(r.body),headers:i}).then(function(e){return e.text().then(function(e){return o.util.text_to_json(e)})}).catch(function(e){return null})):"post"===r.method?(i.append("Content-Type","application/x-www-form-urlencoded"),window.fetch(r.url,{method:"POST",credentials:a,body:e(r.body),headers:i}).then(function(e){return e.text().then(function(e){return o.util.text_to_json(e)})}).catch(function(e){return null})):"http"===r.method?t(r.data):"xhr"===r.method?n(r.data):void 0}var o=window[window.webextension_library_name];return r}(),window[window.webextension_library_name].query=function(){return{query:function(e){if("undefined"==typeof e.method){for(var t=e[0],n=e[1],r=[],o=t.length;o--;){for(var i=!0,a=Object.keys(n),c=a.length;c--;){var u=a[c];n[u]!==t[o][u]&&(i=!1)}i&&r.push(t[o])}return r}if("remove"===e.method)for(var o=e.arr.length;o--;){for(var s=e.arr[o],d=!0,l=Object.keys(e.q||{}),f=Object.keys(e.nq||{}),c=l.length;c--;)s[l[c]]!==e.q[l[c]]&&(d=!1);for(var c=f.length;c--;)s[f[c]]===e.q[f[c]]&&(d=!1);d===!0&&e.arr.splice(o,1)}else if("find"===e.method){for(var r=[],o=e.arr.length;o--;){for(var s=e.arr[o],d=!0,l=Object.keys(e.q||{}),f=Object.keys(e.nq||{}),c=l.length;c--;)s[l[c]]!==e.q[l[c]]&&(d=!1);for(var c=f.length;c--;)s[f[c]]===e.q[f[c]]&&(d=!1);d===!0&&r.push(e.arr[o])}return r}}}}(),window[window.webextension_library_name].storage=function(){return{get:function(e){var t,n=e.split(".");return new Promise(function(e){window.chrome.storage.local.get(null,function(r){t=r;for(var o=0;o<n.length;o++){if(void 0===typeof t[n[o]]){e(void 0);break}t=t[n[o]]}e(t)})})},set:function(e,t){var n,r=e.split(".");return new Promise(function(e){window.chrome.storage.local.get(null,function(o){n=o;for(var i=0;i<r.length;i++)if(i===r.length-1)n[r[i]]=t;else{if(void 0===typeof n[r[i]]){e(!1);break}n=n[r[i]]}window.chrome.storage.local.set(o,e.bind(this,!0))})})}}}(),window[window.webextension_library_name].detect=function(){function e(e){var t=e.root||e.root_element||document,n=e.target_element||document,r=e.callback,o=e.method||"normal",i=e.selector||"*";if("normal"===o){t=t||document;for(var a=t.querySelectorAll(i),c=0;c<a.length;c++)"1"!==a[c].dataset.detected&&(a[c].dataset.detected="1",r(a[c]));var u=new MutationObserver(function(e){var n=t.querySelectorAll(i);if(n)for(var o=0;o<n.length;o++)"1"!==n[o].dataset.detected&&(n[o].dataset.detected="1",r(n[o]))});u.observe(t,{childList:!0,subtree:!0})}else{if("once"===o)return new Promise(function(e){var n=t.querySelector(i);if(n)e(n);else{var r=new MutationObserver(function(){var n=t.querySelector(i);n&&(e(n),r.disconnect(t))});r.observe(t,{childList:!0,subtree:!0})}});if("wait_for"===o)return new Promise(function(e){var n=!1,r=$(i,t).get(0);if(r)e(r);else{var o=new MutationObserver(function(){n===!1&&(r=$(i,t).get(0),r&&(e(r),o.disconnect(t),n=!0))});o.observe(t,{childList:!0,subtree:!0})}});if("detect_attribute_change"===o){var u=new MutationObserver(function(e){r(n,e)});u.observe(n,{attributes:!0})}else if("detect_changes"===o){var u=new MutationObserver(function(e){r(n,e)});u.observe(n,{attributes:!0,childList:!0,subtree:!0})}else if("detect_new_element"===o){var u=new MutationObserver(function(e){r(n,e)});u.observe(n,{attributes:!0,childList:!0,subtree:!0})}}}return e}(),window[window.webextension_library_name].bg_api=function(){if("undefined"!=typeof chrome.extension){var e={};return chrome.runtime.onMessage.addListener(function(t,n,r){if("bg_api"===t._target&&e[t.api_name]&&e[t.api_name][t.method_name]){var o=e[t.api_name][t.method_name](t.input,n);if(o instanceof Promise)return o.then(r),!0;r(o)}}),{register:function(t,n){e[t]=n},exec:function(e,t,n){return new Promise(function(r){chrome.runtime.sendMessage({_target:"bg_api",api_name:e,method_name:t,input:n},r)})}}}}(),window[window.webextension_library_name].conv=function(){function e(e,n,c,u){if(r.debug){var s=i(e,n,c,u);return r.silence&&r.silence.indexOf(n+"_to_"+c)===-1&&(t.conv.log_conv_data(s),o.push(s)),s.output}return a(e,n,c,u)}var t=window[window.webextension_library_name],n={},r={debug:!0,silence:[]},o=[],i=function(){var e=function(t,r,o,i){function a(t,n,r,o){var i=e(t,n,r,o);return s.conv_data_arr.push(i),i.output}var c=n[t],u=r+"_to_"+o,s={namespace:t,from_name:r,to_name:o,conv_data_arr:[],found:!0,input:i,output:void 0};if(c[u])try{s.output=c[u](i,a),s.output instanceof Promise&&(s.output=new Promise(function(e){s.output.then(function(t){e(t)}).catch(function(e){s.error=!0,s.stack=e.stack})}))}catch(e){s.error=!0,s.stack=e.stack}else s.found=!1;return s};return e}(),a=function(){var e=function(t,r,o,i){var a=n[t];if(a&&a[r+"_to_"+o])try{var c=a[r+"_to_"+o](i,e);return c instanceof Promise?new Promise(function(e,t){c.then(function(t){e(t)}).catch(function(t){e(void 0)})}):c}catch(e){return}};return e}();return e.register=function(e,t){n[e]=t},e.set_options=function(e){r=e},e.log_conv_data=function(e){var n="%c "+e.namespace+": "+e.from_name+" => "+e.to_name;e.error?(console.groupCollapsed(n,"color: red"),console.log(e.input),console.log(e.stack)):e.found?(console.groupCollapsed(n,"color: green"),console.log(e.input),console.log(e.output)):(console.groupCollapsed(n,"color: #F0AD4E"),console.log(e.input)),e.conv_data_arr.forEach(function(e){t.conv.log_conv_data(e)}),console.groupEnd()},e.get_conv_data=i,e.flush=function(){o.forEach(e.log_conv_data)},e}();